:root{
    --bg: #0b0f17;
    --bg2:#0a1326;
    --panel: rgba(255,255,255,0.06);
    --panel2: rgba(255,255,255,0.09);
    --stroke: rgba(255,255,255,0.12);
    --stroke2: rgba(255,255,255,0.18);

    --text: rgba(255,255,255,0.92);
    --muted: rgba(255,255,255,0.66);
    --faint: rgba(255,255,255,0.42);

    --accent: #7c5cff;
    --accent2:#22d3ee;
    --danger:#ff3b5c;

    --shadow: 0 18px 55px rgba(0,0,0,.45);
    --shadow2: 0 10px 28px rgba(0,0,0,.35);

    --r: 18px;
    --r2: 14px;
    --pad: 18px;
}

*{ box-sizing:border-box; }
body{
    margin:0;
    color:var(--text);
    background:
            radial-gradient(1000px 600px at 25% 10%, rgba(124,92,255,.18), transparent 55%),
            radial-gradient(900px 600px at 85% 20%, rgba(34,211,238,.12), transparent 55%),
            radial-gradient(900px 700px at 55% 95%, rgba(255,59,92,.08), transparent 55%),
            linear-gradient(180deg, var(--bg), var(--bg2));
    min-height:100vh;
}

/* ===== Shared controls ===== */
.btn, .primary-btn, button, a.btn-like {
    border:1px solid var(--stroke);
    background: rgba(255,255,255,0.06);
    color: var(--text);
    border-radius: 12px;
    padding: 10px 14px;
    font-weight: 650;
    letter-spacing: .2px;
    cursor: pointer;
    transition: transform .12s ease, background .18s ease, border-color .18s ease, box-shadow .18s ease;
    text-decoration: none;
    display: inline-flex;
    align-items:center;
    gap: 8px;
    user-select:none;
}

.btn:hover, .primary-btn:hover, button:hover, a.btn-like:hover{
    background: rgba(255,255,255,0.10);
    border-color: var(--stroke2);
    box-shadow: var(--shadow2);
    transform: translateY(-1px);
}
.btn:active, .primary-btn:active, button:active, a.btn-like:active{
    transform: translateY(0px) scale(.98);
}

.primary-btn{
    background: linear-gradient(135deg, rgba(124,92,255,.95), rgba(34,211,238,.75));
    border-color: rgba(124,92,255,.45);
    box-shadow: 0 18px 55px rgba(124,92,255,.22);
}
.primary-btn:hover{
    border-color: rgba(34,211,238,.55);
}
.btn-danger, .danger{
    background: rgba(255,59,92,.10);
    border-color: rgba(255,59,92,.35);
}
.btn-danger:hover, .danger:hover{
    background: rgba(255,59,92,.18);
    border-color: rgba(255,59,92,.55);
}

input[type="text"], textarea{
    width: 100%;
    background: rgba(255,255,255,0.06);
    border: 1px solid var(--stroke);
    color: var(--text);
    border-radius: 14px;
    padding: 12px 14px;
    outline: none;
    transition: border-color .18s ease, background .18s ease, box-shadow .18s ease;
}

input[type="text"]::placeholder, textarea::placeholder{ color: var(--faint); }
input[type="text"]:focus, textarea:focus{
    border-color: rgba(124,92,255,.55);
    background: rgba(255,255,255,0.08);
    box-shadow: 0 0 0 4px rgba(124,92,255,.15);
}

textarea{
    resize: vertical;
    min-height: 320px;
    line-height: 1.55;
}

/* ===== Layout shell ===== */
.notes-shell{
    display:flex;
    gap: 16px;
    padding: 18px;
    max-width: 1400px;
    margin: 0 auto;
}

.notes-sidebar{
    width: 320px;
    border-radius: var(--r);
    padding: var(--pad);
    background: var(--panel);
    border: 1px solid var(--stroke);
    box-shadow: var(--shadow);
    backdrop-filter: blur(14px);
}

.notes-main{
    flex: 1;
    border-radius: var(--r);
    padding: var(--pad);
    background: var(--panel);
    border: 1px solid var(--stroke);
    box-shadow: var(--shadow);
    backdrop-filter: blur(14px);
    min-height: 72vh;
}

/* ===== Sidebar ===== */
.sidebar-header{
    display:flex;
    align-items:flex-start;
    justify-content:space-between;
    gap: 12px;
    margin-bottom: 14px;
}

.sidebar-header h3{
    margin: 2px 0 0 0;
    font-size: 1.05rem;
    letter-spacing: .3px;
}

.inline-form{
    display:flex;
    gap: 10px;
    width: 100%;
    margin-top: 10px;
}
.inline-form input{
    flex:1;
    border-radius: 14px;
}
.inline-form button{
    padding: 10px 12px;
    border-radius: 14px;
    min-width: 44px;
    justify-content:center;
}

.folder-list{
    display:flex;
    flex-direction:column;
    gap: 8px;
    margin-top: 14px;
}

.folder-item{
    padding: 11px 12px;
    border-radius: 14px;
    border: 1px solid transparent;
    display:flex;
    align-items:center;
    gap: 10px;
    color: var(--text);
    text-decoration:none;
    background: rgba(255,255,255,0.03);
    transition: background .18s ease, border-color .18s ease, transform .12s ease;
}
.folder-item:hover{
    background: rgba(255,255,255,0.06);
    border-color: var(--stroke);
    transform: translateY(-1px);
}
.folder-item.active{
    background: rgba(124,92,255,0.14);
    border-color: rgba(124,92,255,0.35);
    box-shadow: 0 18px 55px rgba(124,92,255,.12);
}

.folder-dot{
    width: 10px;
    height: 10px;
    border-radius: 999px;
    background: rgba(255,255,255,.35);
    box-shadow: 0 0 0 4px rgba(255,255,255,.06);
}
.dot-slate{ background:#94a3b8; }
.dot-purple{ background:#a78bfa; }
.dot-cyan{ background:#22d3ee; }
.dot-green{ background:#34d399; }
.dot-pink{ background:#fb7185; }
.dot-orange{ background:#fb923c; }
.dot-red{ background:#ff3b5c; }

.sidebar-footer{
    margin-top: 18px;
    padding-top: 14px;
    border-top: 1px solid var(--stroke);
    display:flex;
    flex-direction:column;
    gap: 10px;
}
.sidebar-footer form{
    display:flex;
    gap: 10px;
    align-items:center;
}
.sidebar-footer form input{ flex:1; }
.sidebar-footer button{ white-space:nowrap; }

/* ===== Toolbar ===== */
.notes-toolbar{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap: 14px;
    padding: 10px 0 16px 0;
    border-bottom: 1px solid var(--stroke);
    margin-bottom: 16px;
}

.breadcrumbs{
    font-weight: 750;
    letter-spacing:.25px;
}
.breadcrumbs span{ color: var(--muted); }
.breadcrumbs > span:first-child{ color: var(--text); }

.toolbar-actions{
    display:flex;
    align-items:center;
    gap: 12px;
}
.toolbar-actions form{
    display:flex;
    gap: 10px;
    align-items:center;
}
.toolbar-actions input{ width: 240px; }

/* ===== Notes grid ===== */
.file-grid{
    display:grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 14px;
    margin-top: 14px;
}

.file-tile{
    border-radius: var(--r2);
    padding: 14px;
    border: 1px solid var(--stroke);
    background: rgba(255,255,255,0.05);
    text-decoration:none;
    color: var(--text);
    box-shadow: 0 0 0 rgba(0,0,0,0);
    transition: transform .12s ease, background .18s ease, border-color .18s ease, box-shadow .18s ease;
    display:flex;
    gap: 12px;
    align-items:flex-start;
}
.file-tile:hover{
    transform: translateY(-2px);
    background: rgba(255,255,255,0.08);
    border-color: rgba(124,92,255,.35);
    box-shadow: 0 18px 55px rgba(0,0,0,.35);
}
.file-icon{
    width: 38px;
    height: 38px;
    border-radius: 12px;
    display:flex;
    align-items:center;
    justify-content:center;
    background: linear-gradient(135deg, rgba(124,92,255,.25), rgba(34,211,238,.12));
    border: 1px solid rgba(124,92,255,.20);
}
.file-title{
    font-weight: 800;
    margin-bottom: 4px;
}
.file-date{
    color: var(--muted);
    font-size: .9rem;
}

/* ===== Empty states ===== */
.empty{
    margin-top: 18px;
    color: var(--muted);
    padding: 18px;
    border-radius: var(--r2);
    border: 1px dashed rgba(255,255,255,0.18);
    background: rgba(255,255,255,0.03);
}
.empty.big{
    font-size: 1.05rem;
    padding: 22px;
}

/* ===== Note view ===== */
.note-view{
    max-width: 980px;
    margin: 24px auto;
    padding: 0 18px 30px 18px;
}

.note-card{
    border-radius: var(--r);
    background: var(--panel);
    border: 1px solid var(--stroke);
    box-shadow: var(--shadow);
    backdrop-filter: blur(14px);
    padding: 18px;
}

.note-header{
    display:flex;
    justify-content:space-between;
    align-items:flex-start;
    gap: 16px;
    padding-bottom: 14px;
    border-bottom: 1px solid var(--stroke);
    margin-bottom: 14px;
}

.note-meta{
    display:flex;
    flex-wrap: wrap;
    gap: 10px;
    align-items:center;
    color: var(--muted);
}
.note-meta .back-link{
    padding: 8px 10px;
    border-radius: 12px;
    border: 1px solid var(--stroke);
    background: rgba(255,255,255,0.04);
    color: var(--text);
    text-decoration:none;
}
.note-meta .title{
    color: var(--text);
    font-weight: 900;
    font-size: 1.2rem;
}
.note-meta .dot{
    color: var(--faint);
}

.note-actions{
    display:flex;
    gap: 10px;
    align-items:center;
}
.note-actions a{
    text-decoration:none;
}
.note-actions form{ margin:0; }

.note-content{
    white-space: pre-wrap;
    line-height: 1.75;
    color: rgba(255,255,255,0.88);
    font-size: 1.02rem;
    padding: 10px 4px 2px 4px;
}

/* ===== Note form ===== */
.note-form-wrapper{
    max-width: 980px;
    margin: 24px auto;
    padding: 0 18px 30px 18px;
}
.note-form{
    border-radius: var(--r);
    background: var(--panel);
    border: 1px solid var(--stroke);
    box-shadow: var(--shadow);
    backdrop-filter: blur(14px);
    padding: 18px;
    display:flex;
    flex-direction:column;
    gap: 12px;
}
.form-actions{
    display:flex;
    gap: 12px;
    align-items:center;
    justify-content:flex-end;
    padding-top: 6px;
}
.cancel{
    color: var(--muted);
    text-decoration:none;
    padding: 10px 12px;
    border-radius: 12px;
    border: 1px solid transparent;
}
.cancel:hover{
    color: var(--text);
    border-color: var(--stroke);
    background: rgba(255,255,255,0.05);
}

/* ===== Modal ===== */
.modal-overlay{
    position: fixed;
    inset: 0;
    display:none;
    align-items:center;
    justify-content:center;
    padding: 18px;
    background: rgba(0,0,0,0.55);
    backdrop-filter: blur(8px);
    z-index: 9999;
}
.modal-overlay.show{ display:flex; }

.modal{
    width: min(520px, 100%);
    border-radius: var(--r);
    background: rgba(12,16,26,0.92);
    border: 1px solid rgba(255,255,255,0.14);
    box-shadow: var(--shadow);
    padding: 16px;
}
.modal h3{
    margin: 6px 0 8px 0;
    font-size: 1.1rem;
}
.modal p{
    margin: 0 0 14px 0;
    color: var(--muted);
    line-height: 1.55;
}
.modal-actions{
    display:flex;
    justify-content:flex-end;
    gap: 10px;
}

/* ===== Note editor ===== */
.note-form-header{
    display:flex;
    gap: 14px;
    align-items:flex-start;
    flex-wrap: wrap;
}

.note-title-input{
    flex: 1;
    min-width: 260px;
    font-size: 1.15rem;
    font-weight: 900;
    letter-spacing: .2px;
}

.note-colour-picker{
    display:flex;
    align-items:center;
    gap: 8px;
    padding: 10px 12px;
    border-radius: 14px;
    background: rgba(255,255,255,0.04);
    border: 1px solid var(--stroke);
}
.note-colour-picker .label{
    color: var(--muted);
    font-weight: 750;
    margin-right: 4px;
}

.chip{
    border: 1px solid var(--stroke);
    background: rgba(255,255,255,0.04);
    border-radius: 999px;
    padding: 8px 10px;
    font-weight: 750;
    cursor:pointer;
    transition: transform .12s ease, background .18s ease, border-color .18s ease;
}
.chip:hover{ transform: translateY(-1px); background: rgba(255,255,255,0.07); }
.chip.active{
    border-color: rgba(124,92,255,.45);
    background: rgba(124,92,255,.18);
}

/* Toolbar */
.editor-toolbar{
    display:flex;
    flex-wrap: wrap;
    gap: 8px;
    align-items:center;
    padding: 10px;
    border-radius: 16px;
    border: 1px solid var(--stroke);
    background: rgba(255,255,255,0.04);
}

.tool{
    border: 1px solid var(--stroke);
    background: rgba(255,255,255,0.04);
    color: var(--text);
    border-radius: 12px;
    padding: 9px 10px;
    font-weight: 800;
    cursor:pointer;
    transition: transform .12s ease, background .18s ease, border-color .18s ease;
}
.tool:hover{ transform: translateY(-1px); background: rgba(255,255,255,0.08); border-color: var(--stroke2); }
.tool:active{ transform: translateY(0px) scale(.98); }

.tool-select{
    border: 1px solid var(--stroke);
    background: rgba(255,255,255,0.04);
    color: var(--text);
    border-radius: 12px;
    padding: 10px 12px;
    font-weight: 800;
    outline: none;
}
.tool-sep{
    width: 1px;
    height: 26px;
    background: rgba(255,255,255,0.14);
    margin: 0 2px;
}

/* Editor body */
.editor-shell{
    border-radius: var(--r);
    border: 1px solid var(--stroke);
    background: rgba(255,255,255,0.03);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.06);
    overflow:hidden;
}

.editor{
    min-height: 380px;
    padding: 16px;
    outline: none;
    line-height: 1.75;
    color: rgba(255,255,255,0.90);
    font-size: 1.02rem;
}

.editor:empty:before{
    content: attr(data-placeholder);
    color: var(--faint);
}

/* Content formatting */
.editor h1{ font-size: 1.6rem; margin: 10px 0; }
.editor h2{ font-size: 1.35rem; margin: 10px 0; }
.editor h3{ font-size: 1.18rem; margin: 10px 0; }
.editor blockquote{
    margin: 10px 0;
    padding: 10px 14px;
    border-left: 3px solid rgba(34,211,238,.6);
    background: rgba(34,211,238,.08);
    border-radius: 12px;
    color: var(--muted);
}
.editor a{ color: rgba(34,211,238,.95); text-decoration: underline; }
.editor ul, .editor ol{ padding-left: 22px; }
